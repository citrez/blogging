---
title: "Text Mining"
author: "Ezra Citron"
date: 2020-12-01T21:13:14-05:00
categories: ["R"]
tags: ["R Markdown", "plot", "regression"]
---



<div id="text-mining" class="section level1">
<h1>Text Mining</h1>
<p>Text mining promises a lot. The ability to get a machine to understand the main topics in a text, or how positive the writer was about the subject could have applications as far reaching as law, survey analysis, stock market analysis. I usually favor simplisity over perfection. I’d rather have a 6/10 model that I can interpret and (crusially) explain than a 9/10 model that no one can get thier head around. This is why i was so excited when I saw the <code>tidytext</code> package from <a href="https://juliasilge.com/">Julia Sigle</a> at Rstudio.</p>
<p>I’m going to guide you through a piece a some text analysis, motivating why and how we are extracting insight from pieces of text that would be time consuming (and dull) to read from start to finish.</p>
<div id="songs" class="section level2">
<h2>Songs</h2>
<p>Songs lyrics are just text. Why not use next generation technology to answer the age old questions of which musicians are the most basic. Good questions lead to good analysis. Here are the questions id like to address.</p>
<ul>
<li>Is there a notable difference in laguage used by Artists</li>
<li>Which words or phrases are idiosyncratic of certain artists.</li>
<li>Which artists use more complicated laguage (lexical diversity , word length?)</li>
</ul>
<p>I obviously need to pick a few artists to look at, so, (no judgement pls) ill go for Queen, Taylor swift, simon and garfunkle, Eminem for a varied selection.</p>
<p>I will be using the <code>rvest</code> package to scrape all Eminem song lyrics from <a href="www.azlyrics.com">here</a></p>
<pre class="r"><code>library(rvest)
## Loading required package: xml2
library(stringr)
url &lt;- &quot;https://www.azlyrics.com/e/eminem.html&quot;
html &lt;- xml2::read_html(url)
nodes &lt;- html %&gt;% html_nodes(css = &quot;#listAlbum a&quot;) 

extract_lyrics_from_link &lt;- function(i) {
  lyric_text &lt;- rvest::html_session(url) %&gt;% 
  rvest::follow_link(i = i) %&gt;% 
  rvest::html_nodes(&quot;.text-center div&quot;) %&gt;% #css seletor of class text-center, element div
  rvest::html_text()
  
  # Assume the longest section is the actual lyrics
  filtered_lyric_text &lt;- 
    lyric_text[str_length(lyric_text) == max( str_length(lyric_text) ) ] #work out how todo using which

  return(filtered_lyric_text[[1]])
}

parse_lyrics &lt;- function(txt) {

str_replace_all(txt, &quot;[\r\n]&quot;,&quot; &quot; ) %&gt;%
  str_squish() # deletes repeated white space
}

extract_lyrics_from_link(36) %&gt;% parse_lyrics() %&gt;% str_sub(1,100)
## Navigating to ../lyrics/eminem/infinite.html
## [1] &quot;Aw, yeah (It&#39;s like this, like this) It&#39;s Eminem baby, back up in that motherfucking ass (&#39;Til forev&quot;</code></pre>
<p>Now that we have our function to get the lyrics <code>extract_lyrics_from_link</code> and <code>parse_lyrics</code> to clean it up, we can simply loop over the number of songs on the website, and save all the lyrics. Ahh, Physical reality doesnt come close the the satisfaction of running a good loop…</p>
</div>
</div>
<div id="including-plots" class="section level1">
<h1>Including Plots</h1>
<p>You can also embed plots. See Figure <a href="#fig:pie">1</a> for example:</p>
<pre class="r"><code>par(mar = c(0, 1, 0, 1))
pie(
  c(280, 60, 20),
  c(&#39;Sky&#39;, &#39;Sunny side of pyramid&#39;, &#39;Shady side of pyramid&#39;),
  col = c(&#39;#0292D8&#39;, &#39;#F7EA39&#39;, &#39;#C4B632&#39;),
  init.angle = -50, border = NA
)</code></pre>
<div class="figure"><span id="fig:pie"></span>
<img src="{{< blogdown/postref >}}index_files/figure-html/pie-1.png" alt="A fancy pie chart." width="672" />
<p class="caption">
Figure 1: A fancy pie chart.
</p>
</div>
</div>
